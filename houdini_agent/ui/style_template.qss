/* ============================================================
   Houdini Agent — Glassmorphism Dark Theme
   
   Design Tokens (reference):
     BG_DEEP       #0a0a12    BG_PRIMARY    #0f1019
     BG_GRADIENT   #0d1520    
     GLASS_DARK    rgba(12,14,25,220)   GLASS_MID   rgba(16,18,32,200)
     GLASS_LIGHT   rgba(22,24,42,180)   GLASS_INPUT rgba(18,20,38,230)
     BORDER_GLASS  rgba(255,255,255,12)  BORDER_SUBTLE rgba(255,255,255,20)
     BORDER_FOCUS  rgba(59,130,246,120)  BORDER_ACCENT rgba(168,139,250,80)
     TEXT_PRIMARY   #e2e8f0   TEXT_SECONDARY #94a3b8
     TEXT_MUTED     #64748b   TEXT_BRIGHT    #ffffff
     ACCENT_BLUE   #3b82f6   ACCENT_GREEN  #10b981
     ACCENT_ORANGE #f59e0b   ACCENT_RED    #ef4444
     ACCENT_PURPLE #a78bfa   ACCENT_BEIGE  #d4a574
     ACCENT_YELLOW #fbbf24
   
   Font Size Placeholders (replaced by ThemeEngine):
     {FS_MICRO}=10  {FS_XS}=11  {FS_SM}=12  {FS_BODY}=13
     {FS_MD}=14     {FS_LG}=16  {FS_XL}=17
   ============================================================ */


/* ============================================================
   1. GLOBAL BASE
   ============================================================ */

QWidget#aiTab {
    background: qlineargradient(x1:0, y1:0, x2:0.3, y2:1,
                    stop:0 #0f1019, stop:0.5 #0d0f1a, stop:1 #0a1018);
    color: #e2e8f0;
    font-family: 'Microsoft YaHei', 'SimSun', 'Segoe UI', sans-serif;
    font-size: {FS_BODY}px;
}

QToolTip {
    background: rgba(16,18,32,240);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,15);
    border-radius: 6px;
    padding: 6px 10px;
    font-size: {FS_SM}px;
}


/* ============================================================
   2. SCROLLBARS (ultra-thin glass)
   ============================================================ */

QScrollBar:vertical {
    background: transparent;
    width: 7px;
    margin: 0;
    border: none;
}
QScrollBar::handle:vertical {
    background: rgba(255,255,255,25);
    border-radius: 3px;
    min-height: 28px;
}
QScrollBar::handle:vertical:hover {
    background: rgba(255,255,255,55);
}
QScrollBar::add-line:vertical,
QScrollBar::sub-line:vertical {
    height: 0px;
}
QScrollBar::add-page:vertical,
QScrollBar::sub-page:vertical {
    background: none;
}

QScrollBar:horizontal {
    background: transparent;
    height: 6px;
    margin: 0;
    border: none;
}
QScrollBar::handle:horizontal {
    background: rgba(255,255,255,25);
    border-radius: 3px;
    min-width: 28px;
}
QScrollBar::handle:horizontal:hover {
    background: rgba(255,255,255,55);
}
QScrollBar::add-line:horizontal,
QScrollBar::sub-line:horizontal {
    width: 0px;
}
QScrollBar::add-page:horizontal,
QScrollBar::sub-page:horizontal {
    background: none;
}


/* ============================================================
   3. HEADER (glass panel)
   ============================================================ */

QFrame#headerFrame {
    background: rgba(12,14,25,220);
    border-bottom: 1px solid rgba(255,255,255,8);
}

/* --- ComboBox (Provider / Model) --- */
QComboBox#providerCombo,
QComboBox#modelCombo {
    background: rgba(18,20,38,230);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 3px 10px;
    font-size: {FS_SM}px;
    min-height: 24px;
}
QComboBox#providerCombo::drop-down,
QComboBox#modelCombo::drop-down {
    border: none;
    width: 16px;
}
QComboBox#providerCombo:hover,
QComboBox#modelCombo:hover {
    border-color: rgba(59,130,246,100);
    background: rgba(22,24,42,240);
}
QComboBox#providerCombo QAbstractItemView,
QComboBox#modelCombo QAbstractItemView {
    background: rgba(16,18,32,245);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,15);
    selection-background-color: rgba(59,130,246,80);
    selection-color: #ffffff;
    font-size: {FS_SM}px;
    outline: none;
    border-radius: 6px;
}

/* --- Checkboxes (Web / Think) --- */
QCheckBox#chkWeb,
QCheckBox#chkThink {
    color: #94a3b8;
    font-size: {FS_SM}px;
    spacing: 5px;
}
QCheckBox#chkWeb::indicator,
QCheckBox#chkThink::indicator {
    width: 13px;
    height: 13px;
    border-radius: 3px;
    border: 1.5px solid #64748b;
    background: transparent;
}
QCheckBox#chkWeb::indicator:checked,
QCheckBox#chkThink::indicator:checked {
    background: rgba(59,130,246,180);
    border-color: #3b82f6;
}
QCheckBox#chkWeb:hover,
QCheckBox#chkThink:hover {
    color: #e2e8f0;
}

/* --- Confirm checkbox (input area) --- */
QCheckBox#chkConfirm {
    color: #94a3b8;
    font-size: {FS_SM}px;
    spacing: 5px;
}
QCheckBox#chkConfirm::indicator {
    width: 14px;
    height: 14px;
    border-radius: 4px;
    border: 1.5px solid #64748b;
    background: transparent;
}
QCheckBox#chkConfirm::indicator:hover {
    border-color: #94a3b8;
}
QCheckBox#chkConfirm:hover {
    color: #e2e8f0;
}
QCheckBox#chkConfirm::indicator:checked {
    background: rgba(245,158,11,180);
    border-color: #f59e0b;
}

/* --- Key Status --- */
QLabel#keyStatus {
    color: #64748b;
    font-size: {FS_MICRO}px;
}
QLabel#keyStatus[state="ok"] {
    color: #10b981;
}
QLabel#keyStatus[state="error"] {
    color: #ef4444;
}
QLabel#keyStatus[state="warning"] {
    color: #f59e0b;
}

/* --- Small Buttons (header & input toolbar) --- */
QPushButton#btnSmall {
    background: rgba(22,24,42,180);
    color: #94a3b8;
    border: 1px solid rgba(255,255,255,10);
    border-radius: 8px;
    font-size: {FS_XS}px;
    padding: 2px 10px;
    min-height: 22px;
}
QPushButton#btnSmall:hover {
    background: rgba(40,42,68,220);
    color: #e2e8f0;
    border-color: rgba(59,130,246,80);
}

/* --- Optimize button (with dynamic warning state) --- */
QPushButton#btnOptimize {
    background: rgba(22,24,42,180);
    color: #94a3b8;
    border: 1px solid rgba(255,255,255,10);
    border-radius: 8px;
    font-size: {FS_XS}px;
    padding: 2px 10px;
    min-height: 22px;
}
QPushButton#btnOptimize:hover {
    background: rgba(40,42,68,220);
    color: #e2e8f0;
    border-color: rgba(59,130,246,80);
}
QPushButton#btnOptimize[state="warning"] {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 rgba(245,158,11,200), stop:1 rgba(234,88,12,200));
    color: #ffffff;
    border-color: rgba(245,158,11,60);
}

/* --- Update button --- */
QPushButton#btnUpdate {
    background: rgba(22,24,42,180);
    color: #fbbf24;
    border: 1px solid rgba(251,191,36,50);
    border-radius: 8px;
    font-size: {FS_XS}px;
    padding: 2px 10px;
    min-height: 22px;
}
QPushButton#btnUpdate:hover {
    background: rgba(251,191,36,40);
    color: #fef3c7;
    border-color: rgba(251,191,36,100);
}
QPushButton#btnUpdate[state="available"] {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #10b981, stop:1 #059669);
    color: #ffffff;
    border-color: rgba(16,185,129,60);
    font-weight: bold;
}

/* --- Font scale button --- */
QPushButton#btnFontScale {
    background: rgba(22,24,42,180);
    color: #94a3b8;
    border: 1px solid rgba(255,255,255,10);
    border-radius: 8px;
    font-size: {FS_SM}px;
    padding: 2px 8px;
    min-height: 22px;
    font-weight: bold;
}
QPushButton#btnFontScale:hover {
    background: rgba(40,42,68,220);
    color: #e2e8f0;
    border-color: rgba(59,130,246,80);
}


/* ============================================================
   4. SESSION TABS (glass panel)
   ============================================================ */

QFrame#sessionBar {
    background: rgba(12,14,25,200);
    border-bottom: 1px solid rgba(255,255,255,6);
}

QTabBar#sessionTabs {
    background: transparent;
}
QTabBar#sessionTabs::tab {
    background: rgba(16,18,32,160);
    color: #64748b;
    border: 1px solid rgba(255,255,255,8);
    border-bottom: none;
    border-radius: 8px 8px 0 0;
    padding: 5px 14px;
    margin-right: 2px;
    font-size: {FS_XS}px;
    min-width: 60px;
    max-width: 200px;
}
QTabBar#sessionTabs::tab:selected {
    background: rgba(22,24,42,220);
    color: #e2e8f0;
    border-bottom: 2px solid #d4a574;
}
QTabBar#sessionTabs::tab:hover:!selected {
    background: rgba(30,32,55,180);
    color: #94a3b8;
}

QPushButton#btnNewSession {
    background: rgba(22,24,42,160);
    color: #94a3b8;
    border: 1px solid rgba(255,255,255,8);
    border-radius: 6px;
    font-size: {FS_MD}px;
    font-weight: bold;
}
QPushButton#btnNewSession:hover {
    background: rgba(40,42,68,200);
    color: #e2e8f0;
    border-color: rgba(59,130,246,60);
}

/* Chat scroll area */
QScrollArea#chatScrollArea {
    border: none;
    background: transparent;
}


/* ============================================================
   5. NODE CONTEXT BAR (glass panel)
   ============================================================ */

QFrame#NodeContextBar {
    background: rgba(16,18,32,180);
    border-bottom: 1px solid rgba(255,255,255,6);
}
QLabel#ctxPathLabel {
    color: #64748b;
    font-size: {FS_SM}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}
QLabel#ctxSelLabel {
    color: #3b82f6;
    font-size: {FS_SM}px;
}
QPushButton#ctxRefreshBtn {
    border: none;
    font-size: {FS_SM}px;
    background: transparent;
    color: #94a3b8;
}
QPushButton#ctxRefreshBtn:hover {
    color: #e2e8f0;
}


/* ============================================================
   6. CHAT AREA - User Messages (glass card)
   ============================================================ */

QWidget#userMsgContainer {
    background: rgba(16,18,32,180);
    border-left: 3px solid rgba(148,163,184,120);
    border-radius: 0 8px 8px 0;
}
QLabel#userMsgText {
    color: #ffffff;
    font-size: {FS_LG}px;
    background: transparent;
}
QPushButton#userMsgToggle {
    color: #64748b;
    font-size: {FS_SM}px;
    border: none;
    background: transparent;
    text-align: left;
    padding: 0;
}
QPushButton#userMsgToggle:hover {
    color: #3b82f6;
}


/* ============================================================
   7. CHAT AREA - AI Response (glass card)
   ============================================================ */

QFrame#aiSummary {
    background: rgba(12,14,25,160);
    border-left: 3px solid rgba(167,139,250,100);
    border-radius: 0 8px 8px 0;
}
QLabel#aiStatusLabel {
    color: #64748b;
    font-size: {FS_BODY}px;
}
QPushButton#aiCopyBtn {
    color: #94a3b8;
    background: rgba(22,24,42,160);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 6px;
    font-size: {FS_SM}px;
    padding: 0 10px;
}
QPushButton#aiCopyBtn:hover {
    color: #e2e8f0;
    background: rgba(40,42,68,200);
    border-color: rgba(59,130,246,80);
}
QPushButton#aiCopyBtn[state="copied"] {
    color: #10b981;
    border-color: rgba(16,185,129,80);
}

QPlainTextEdit#aiContentLabel {
    color: #e2e8f0;
    background: transparent;
    border: none;
    padding: 0px;
    font-size: {FS_MD}px;
}
QPlainTextEdit#aiContentLabel[state="empty"] {
    color: #64748b;
    font-size: {FS_BODY}px;
}

/* Status line */
QLabel#statusLine {
    color: #64748b;
    font-size: {FS_LG}px;
    padding: 1px 0;
}


/* ============================================================
   8. CHAT AREA - Collapsible Sections (glass)
   ============================================================ */

/* Default collapsible header */
QPushButton#collapseHeader {
    color: #94a3b8;
    font-size: {FS_LG}px;
    text-align: left;
    padding: 5px 10px;
    border: none;
    background: rgba(16,18,32,180);
    border-radius: 6px;
}
QPushButton#collapseHeader:hover {
    background: rgba(30,32,55,200);
    color: #e2e8f0;
}

QWidget#collapseContent {
    background: rgba(16,18,32,140);
    border-radius: 0 0 6px 6px;
}

/* Collapsible section text labels */
QLabel#collapseText {
    font-size: {FS_MD}px;
    padding: 2px 0;
}
QLabel#collapseText[textStyle="normal"] { color: #94a3b8; }
QLabel#collapseText[textStyle="muted"]  { color: #64748b; }
QLabel#collapseText[textStyle="success"]{ color: #10b981; }
QLabel#collapseText[textStyle="error"]  { color: #ef4444; }

/* CollapsibleContent title */
QPushButton#collapseContentTitle {
    color: #94a3b8;
    font-size: {FS_LG}px;
    text-align: left;
    padding: 2px 0;
    border: none;
    background: transparent;
}
QPushButton#collapseContentTitle:hover {
    color: #e2e8f0;
}

QLabel#collapseContentLabel {
    color: #94a3b8;
    font-size: {FS_MD}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    padding: 4px 0 4px 12px;
    background: rgba(16,18,32,120);
    border-radius: 4px;
}


/* ============================================================
   9. THINKING SECTION (purple glass)
   ============================================================ */

QPushButton#thinkHeader {
    color: #a78bfa;
    font-size: {FS_LG}px;
    text-align: left;
    padding: 5px 10px;
    border: none;
    background: rgba(20,16,40,200);
    border-radius: 6px;
    border-left: 2px solid rgba(167,139,250,60);
}
QPushButton#thinkHeader:hover {
    background: rgba(30,24,55,220);
}

QPlainTextEdit#thinkLabel {
    color: #94a3b8;
    background: transparent;
    border: none;
    padding: 4px;
    font-size: {FS_BODY}px;
}


/* ============================================================
   10. EXECUTION SECTION (warm glass)
   ============================================================ */

QPushButton#execHeader {
    color: #d4a574;
    font-size: {FS_LG}px;
    text-align: left;
    padding: 5px 10px;
    border: none;
    background: rgba(25,18,14,200);
    border-radius: 6px;
    border-left: 2px solid rgba(212,165,116,50);
}
QPushButton#execHeader:hover {
    background: rgba(40,28,20,220);
}


/* ============================================================
   11. TOOL CALL ITEMS
   ============================================================ */

QPushButton#toolCallHeader {
    color: #94a3b8;
    font-size: {FS_BODY}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    text-align: left;
    padding: 4px 10px;
    border: none;
    background: transparent;
    border-radius: 4px;
}
QPushButton#toolCallHeader:hover {
    background: rgba(30,32,55,160);
    color: #e2e8f0;
}
QPushButton#toolCallHeader[state="failed"] {
    color: #ffffff;
}

QProgressBar#toolProgress {
    background: rgba(16,18,32,120);
    border: none;
    max-height: 2px;
    border-radius: 1px;
}
QProgressBar#toolProgress::chunk {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #d4a574, stop:1 #f59e0b);
    border-radius: 1px;
}

QLabel#toolResultLabel {
    color: #64748b;
    font-size: {FS_SM}px;
    padding: 2px 4px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}
QLabel#toolResultLabel[state="failed"] {
    color: #ffffff;
}


/* ============================================================
   12. SHELL SECTIONS (glass)
   ============================================================ */

QPushButton#shellHeaderPython {
    color: #fbbf24;
    font-size: {FS_MD}px;
    text-align: left;
    padding: 5px 10px;
    border: none;
    background: rgba(20,18,10,200);
    border-radius: 6px;
}
QPushButton#shellHeaderPython:hover {
    background: rgba(35,30,16,220);
}

QPushButton#shellHeaderSystem {
    color: #10b981;
    font-size: {FS_MD}px;
    text-align: left;
    padding: 5px 10px;
    border: none;
    background: rgba(8,18,16,200);
    border-radius: 6px;
}
QPushButton#shellHeaderSystem:hover {
    background: rgba(14,30,26,220);
}


/* ============================================================
   13. CODE BLOCKS (deep glass)
   ============================================================ */

QFrame#CodeBlockWidget {
    background: rgba(10,10,28,230);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 10px;
}
QWidget#codeBlockHeader {
    background: rgba(18,18,38,220);
    border-radius: 10px 10px 0 0;
}
QLabel#codeBlockLang {
    color: #64748b;
    font-size: {FS_XS}px;
    font-weight: bold;
    font-family: 'Consolas', 'Monaco', monospace;
}
QPushButton#codeBlockBtn {
    color: #94a3b8;
    background: rgba(22,24,42,160);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 6px;
    font-size: {FS_XS}px;
    padding: 2px 10px;
}
QPushButton#codeBlockBtn:hover {
    background: rgba(40,42,68,200);
    color: #ffffff;
    border-color: rgba(59,130,246,60);
}
QPushButton#codeBlockBtnGreen {
    color: #10b981;
    background: rgba(22,24,42,160);
    border: 1px solid rgba(16,185,129,40);
    border-radius: 6px;
    font-size: {FS_XS}px;
    padding: 2px 10px;
}
QPushButton#codeBlockBtnGreen:hover {
    background: rgba(16,185,129,30);
    color: #ffffff;
}
QTextEdit#codeBlockEdit {
    background: rgba(10,10,28,200);
    color: #e2e8f0;
    border: none;
    padding: 8px 10px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: {FS_BODY}px;
}


/* ============================================================
   14. PYTHON / SYSTEM SHELL WIDGETS (deep glass)
   ============================================================ */

QFrame#PythonShellWidget {
    background: rgba(10,10,28,220);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 10px;
}
QFrame#PythonShellWidget[state="error"] {
    border-left: 3px solid #ef4444;
}
QFrame#PythonShellWidget[state="ok"] {
    border-left: 3px solid #d4a574;
}

QWidget#pyShellHeader {
    background: rgba(18,18,38,220);
    border-radius: 10px 10px 0 0;
}
QLabel#pyShellTitle {
    color: #d4a574;
    font-size: {FS_XS}px;
    font-weight: bold;
    font-family: 'Consolas', 'Monaco', monospace;
}

QFrame#SystemShellWidget {
    background: rgba(8,12,12,220);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 10px;
}
QFrame#SystemShellWidget[state="error"] {
    border-left: 3px solid #ef4444;
}
QFrame#SystemShellWidget[state="ok"] {
    border-left: 3px solid #10b981;
}

QWidget#sysShellHeader {
    background: rgba(12,18,16,220);
    border-radius: 10px 10px 0 0;
}
QLabel#sysShellTitle {
    color: #10b981;
    font-size: {FS_XS}px;
    font-weight: bold;
    font-family: 'Consolas', 'Monaco', monospace;
}

/* Shared shell small labels */
QLabel#shellTimeLbl {
    color: #64748b;
    font-size: {FS_XS}px;
}
QLabel#shellStatusOk {
    color: #10b981;
    font-size: {FS_XS}px;
    font-weight: bold;
    font-family: 'Consolas', 'Monaco', monospace;
}
QLabel#shellStatusErr {
    color: #ef4444;
    font-size: {FS_XS}px;
    font-weight: bold;
    font-family: 'Consolas', 'Monaco', monospace;
}
QLabel#shellCwdLbl {
    color: #64748b;
    font-size: {FS_MICRO}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}
QLabel#shellErrFallback {
    color: #ef4444;
    font-size: {FS_SM}px;
    padding: 6px 8px;
}

/* Shell code / command area */
QTextEdit#shellCodeEdit {
    background: rgba(12,10,30,220);
    color: #e2e8f0;
    border: none;
    border-bottom: 1px solid rgba(255,255,255,6);
    padding: 8px 10px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: {FS_BODY}px;
}
QTextEdit#shellCmdEdit {
    background: rgba(10,12,12,220);
    color: #e2e8f0;
    border: none;
    border-bottom: 1px solid rgba(255,255,255,6);
    padding: 8px 10px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: {FS_BODY}px;
}

/* Collapsible shell output */
QTextEdit#shellOutput {
    color: #e2e8f0;
    border: none;
    padding: 8px 10px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: {FS_SM}px;
}
QTextEdit#shellOutput[variant="python"] { background: rgba(8,8,22,200); }
QTextEdit#shellOutput[variant="system"] { background: rgba(8,10,10,200); }

QLabel#shellToggle {
    color: #3b82f6;
    font-size: {FS_XS}px;
    padding: 4px 10px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    border-radius: 0 0 8px 8px;
}
QLabel#shellToggle:hover {
    color: #e2e8f0;
    background: rgba(30,32,55,160);
}
QLabel#shellToggle[variant="python"] {
    background: rgba(8,8,22,180);
    border-top: 1px solid rgba(255,255,255,6);
}
QLabel#shellToggle[variant="system"] {
    background: rgba(8,10,10,180);
    border-top: 1px solid rgba(255,255,255,6);
}


/* ============================================================
   15. INPUT AREA (glass panel)
   ============================================================ */

QFrame#inputArea {
    background: rgba(12,14,25,220);
    border-top: 1px solid rgba(255,255,255,8);
}

/* Batch undo/keep bar */
QFrame#batchBar {
    background: rgba(16,18,32,200);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 8px;
}
QLabel#batchCountLabel {
    color: #94a3b8;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}
QPushButton#btnUndoAll {
    color: #ef4444;
    font-size: {FS_XS}px;
    padding: 3px 12px;
    border: 1px solid rgba(239,68,68,80);
    border-radius: 6px;
    background: transparent;
}
QPushButton#btnUndoAll:hover {
    background: rgba(239,68,68,20);
    border-color: rgba(239,68,68,120);
}
QPushButton#btnKeepAll {
    color: #10b981;
    font-size: {FS_XS}px;
    padding: 3px 12px;
    border: 1px solid rgba(16,185,129,80);
    border-radius: 6px;
    background: transparent;
}
QPushButton#btnKeepAll:hover {
    background: rgba(16,185,129,20);
    border-color: rgba(16,185,129,120);
}

/* Mode combo (Agent / Ask) — left of input */
QComboBox#modeCombo {
    background: rgba(18,20,38,230);
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 4px 8px;
    font-size: {FS_SM}px;
    font-weight: bold;
    min-height: 26px;
}
QComboBox#modeCombo::drop-down {
    border: none;
    width: 14px;
}
QComboBox#modeCombo QAbstractItemView {
    background: rgba(16,18,32,245);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,15);
    selection-background-color: rgba(59,130,246,80);
    selection-color: #ffffff;
    font-size: {FS_SM}px;
    outline: none;
    border-radius: 6px;
    padding: 2px;
}
/* Agent = 灰色调 */
QComboBox#modeCombo[mode="agent"] {
    color: #94a3b8;
    border-color: rgba(148,163,184,40);
}
QComboBox#modeCombo[mode="agent"]:hover {
    background: rgba(22,24,42,240);
    border-color: rgba(148,163,184,80);
}
/* Ask = 绿色调 */
QComboBox#modeCombo[mode="ask"] {
    color: #10b981;
    border-color: rgba(16,185,129,50);
}
QComboBox#modeCombo[mode="ask"]:hover {
    background: rgba(22,24,42,240);
    border-color: rgba(16,185,129,100);
}

/* Chat input (glass with glow on focus) */
QPlainTextEdit#chatInput {
    background: rgba(18,20,38,230);
    color: #e2e8f0;
    border: 1.5px solid rgba(255,255,255,12);
    border-radius: 10px;
    padding: 10px;
    font-size: {FS_LG}px;
}
QPlainTextEdit#chatInput:focus {
    border-color: rgba(59,130,246,140);
    background: rgba(20,22,42,240);
}

/* Token stats button */
QPushButton#tokenStats {
    background: transparent;
    color: #64748b;
    border: none;
    font-size: {FS_SM}px;
    font-family: 'Consolas', 'Monaco', monospace;
    padding: 2px 8px;
}
QPushButton#tokenStats:hover {
    color: #e2e8f0;
    background: rgba(30,32,55,160);
    border-radius: 6px;
}

/* Context label */
QLabel#contextLabel {
    color: #64748b;
    font-size: {FS_SM}px;
    font-family: 'Consolas', 'Monaco', monospace;
    padding: 0 4px;
}
QLabel#contextLabel[state="normal"] {
    color: #10b981;
}
QLabel#contextLabel[state="warning"] {
    color: #f59e0b;
}
QLabel#contextLabel[state="critical"] {
    color: #ef4444;
}

/* Send button — default / Agent mode (蓝紫渐变) */
QPushButton#btnSend {
    color: #ffffff;
    border: none;
    border-radius: 10px;
    font-size: {FS_XL}px;
    padding: 8px 22px;
    min-height: 32px;
    font-weight: bold;
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #3b82f6, stop:1 #6366f1);
}
QPushButton#btnSend:hover {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #60a5fa, stop:1 #818cf8);
}
QPushButton#btnSend:disabled {
    background: rgba(22,24,42,180);
    color: #64748b;
}
/* Ask 模式 = 绿色渐变 */
QPushButton#btnSend[mode="ask"] {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #10b981, stop:1 #059669);
}
QPushButton#btnSend[mode="ask"]:hover {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #34d399, stop:1 #10b981);
}

/* Stop button (gradient) */
QPushButton#btnStop {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #ef4444, stop:1 #dc2626);
    color: #ffffff;
    border: none;
    border-radius: 10px;
    font-size: {FS_XL}px;
    padding: 8px 22px;
    min-height: 32px;
    font-weight: bold;
}
QPushButton#btnStop:hover {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #f87171, stop:1 #ef4444);
}


/* ============================================================
   16. TOOL STATUS BAR
   ============================================================ */

QFrame#toolStatusBar {
    background: transparent;
    border: none;
}
QLabel#toolStatusLabel {
    color: #64748b;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}


/* ============================================================
   17. TODO (glass card)
   ============================================================ */

QFrame#todoCard {
    background: rgba(16,18,32,200);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 10px;
}
QLabel#todoTitle {
    color: #a78bfa;
    font-size: {FS_MD}px;
    font-weight: bold;
}
QLabel#todoCount {
    color: #64748b;
    font-size: {FS_XS}px;
}
QPushButton#todoClearBtn {
    background: transparent;
    color: #64748b;
    border: none;
    font-size: {FS_XS}px;
    padding: 2px 6px;
}
QPushButton#todoClearBtn:hover {
    color: #e2e8f0;
}
QFrame#todoSeparator {
    color: rgba(255,255,255,8);
    max-height: 1px;
}

/* Todo items — dynamic state */
QLabel#todoStatusIcon {
    font-size: {FS_SM}px;
}
QLabel#todoStatusIcon[state="pending"]     { color: #64748b; }
QLabel#todoStatusIcon[state="in_progress"] { color: #3b82f6; }
QLabel#todoStatusIcon[state="done"]        { color: #10b981; }
QLabel#todoStatusIcon[state="error"]       { color: #ef4444; }

QLabel#todoText {
    font-size: {FS_BODY}px;
}
QLabel#todoText[state="pending"]     { color: #64748b; }
QLabel#todoText[state="in_progress"] { color: #3b82f6; }
QLabel#todoText[state="done"]        { color: #64748b; text-decoration: line-through; }
QLabel#todoText[state="error"]       { color: #ef4444; }


/* ============================================================
   18. PLAN BLOCK
   ============================================================ */

QLabel#planTitle {
    color: #d4a574;
    font-size: {FS_LG}px;
    font-weight: bold;
    padding: 2px 0;
}
QLabel#planStep {
    font-size: {FS_LG}px;
    padding: 1px 0 1px 8px;
}
QLabel#planStep[state="pending"] { color: #64748b; }
QLabel#planStep[state="running"] { color: #3b82f6; }
QLabel#planStep[state="done"]    { color: #10b981; }
QLabel#planStep[state="error"]   { color: #ef4444; }


/* ============================================================
   19. NODE OPERATION LABELS
   ============================================================ */

QPushButton#nodePathBtn {
    color: #d4a574;
    font-size: {FS_SM}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    padding: 1px 6px;
    border: 1px solid transparent;
    text-decoration: underline;
    background: transparent;
    border-radius: 4px;
}
QPushButton#nodePathBtn:hover {
    color: #ffffff;
    background: rgba(30,32,55,160);
    border-color: rgba(255,255,255,10);
}

QPushButton#btnUndoOp {
    font-size: {FS_XS}px;
    padding: 2px 8px;
    border-radius: 6px;
    background: transparent;
    color: #ef4444;
    border: 1px solid rgba(239,68,68,80);
}
QPushButton#btnUndoOp:hover {
    background: rgba(239,68,68,20);
    border-color: rgba(239,68,68,120);
}
QPushButton#btnUndoOp:disabled {
    color: #64748b;
    border-color: transparent;
}

QPushButton#btnKeepOp {
    font-size: {FS_XS}px;
    padding: 2px 8px;
    border-radius: 6px;
    background: transparent;
    color: #10b981;
    border: 1px solid rgba(16,185,129,80);
}
QPushButton#btnKeepOp:hover {
    background: rgba(16,185,129,20);
    border-color: rgba(16,185,129,120);
}
QPushButton#btnKeepOp:disabled {
    color: #64748b;
    border-color: transparent;
}

QLabel#nodeOpStatus {
    color: #64748b;
    font-size: {FS_XS}px;
}
QLabel#nodeOpStatus[state="undone"] {
    color: #ef4444;
}

QLabel#nodeOpCount {
    font-size: {FS_BODY}px;
    font-weight: bold;
    padding: 2px 8px;
    background: rgba(16,18,32,180);
    border-radius: 6px;
    border: 1px solid rgba(255,255,255,6);
}
QLabel#nodeOpCount[op="create"] { color: #10b981; }
QLabel#nodeOpCount[op="modify"] { color: #fbbf24; }
QLabel#nodeOpCount[op="delete"] { color: #ef4444; }

QLabel#nodeOpMore {
    color: #64748b;
    font-size: {FS_MICRO}px;
}
QLabel#nodeOpDetail {
    color: #94a3b8;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}


/* ============================================================
   20. VEX PREVIEW (INLINE + DIALOG)
   ============================================================ */

/* Inline preview card */
QFrame#vexPreviewInline {
    background: rgba(16,18,32,200);
    border: 1.5px solid rgba(212,165,116,100);
    border-radius: 10px;
}
QLabel#vexPreviewTitle {
    color: #d4a574;
    font-size: {FS_BODY}px;
    font-weight: bold;
}
QLabel#vexInlineSummary {
    color: #e2e8f0;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    background: transparent;
    padding: 2px 4px;
}

QPushButton#btnCancel {
    color: #94a3b8;
    background: rgba(22,24,42,180);
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 0 14px;
    font-size: {FS_SM}px;
}
QPushButton#btnCancel:hover {
    background: rgba(40,42,68,220);
    color: #e2e8f0;
}
QPushButton#btnConfirmGreen {
    color: #ffffff;
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #10b981, stop:1 #059669);
    border: none;
    border-radius: 8px;
    padding: 0 16px;
    font-size: {FS_SM}px;
    font-weight: bold;
}
QPushButton#btnConfirmGreen:hover {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #34d399, stop:1 #10b981);
}

/* VEX inline status (decided) */
QLabel#vexPreviewStatus {
    font-size: {FS_BODY}px;
    font-weight: bold;
    padding: 4px 8px;
}
QLabel#vexPreviewStatus[state="confirmed"] {
    color: #10b981;
}
QLabel#vexPreviewStatus[state="cancelled"] {
    color: #94a3b8;
}

/* VEX Dialog */
QDialog#vexPreviewDlg {
    background: rgba(10,10,18,250);
    color: #e2e8f0;
}
QLabel#vexDlgTitle {
    color: #d4a574;
    font-size: {FS_MD}px;
    font-weight: bold;
}
QPlainTextEdit#vexDlgCode {
    background: rgba(16,18,32,230);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 10px;
    font-size: {FS_BODY}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}
QPushButton#dlgBtnCancel {
    color: #94a3b8;
    background: rgba(22,24,42,180);
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 0 22px;
    font-size: {FS_BODY}px;
}
QPushButton#dlgBtnCancel:hover {
    background: rgba(40,42,68,220);
    color: #e2e8f0;
}
QPushButton#dlgBtnConfirm {
    color: #ffffff;
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #10b981, stop:1 #059669);
    border: none;
    border-radius: 8px;
    padding: 0 22px;
    font-size: {FS_BODY}px;
    font-weight: bold;
}
QPushButton#dlgBtnConfirm:hover {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #34d399, stop:1 #10b981);
}
QLabel#vexDlgInfo {
    color: #94a3b8;
    font-size: {FS_SM}px;
}


/* ============================================================
   21. NODE COMPLETER POPUP (glass)
   ============================================================ */

QListWidget#nodeCompleter {
    background: rgba(16,18,32,240);
    color: #e2e8f0;
    border: 1px solid rgba(59,130,246,80);
    border-radius: 8px;
    font-size: {FS_SM}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    padding: 4px;
}
QListWidget#nodeCompleter::item {
    padding: 4px 8px;
    border-radius: 4px;
}
QListWidget#nodeCompleter::item:selected {
    background: rgba(59,130,246,100);
    color: #ffffff;
}
QListWidget#nodeCompleter::item:hover {
    background: rgba(30,32,55,180);
}


/* ============================================================
   22. IMAGE PREVIEW DIALOG
   ============================================================ */

QDialog#imgPreviewDlg {
    background: rgba(10,10,18,250);
}
QLabel#imgInfoLabel {
    color: #94a3b8;
    font-size: {FS_SM}px;
}
QPushButton#imgCloseBtn {
    background: rgba(22,24,42,200);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 6px 18px;
    font-size: {FS_BODY}px;
}
QPushButton#imgCloseBtn:hover {
    background: rgba(40,42,68,220);
}

/* Image thumbnail in chat */
QLabel#imgThumb {
    border: 1px solid rgba(255,255,255,12);
    border-radius: 6px;
}
QPushButton#imgRemoveBtn {
    background: #ef4444;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: {FS_MICRO}px;
}
QPushButton#imgRemoveBtn:hover {
    background: #f87171;
}


/* ============================================================
   23. TOKEN ANALYTICS DIALOG (glass)
   ============================================================ */

QDialog#tokenPanel {
    background: rgba(10,10,18,250);
    color: #e2e8f0;
}

QPushButton#tokenResetBtn {
    background: transparent;
    color: #f59e0b;
    border: 1px solid rgba(245,158,11,80);
    border-radius: 8px;
    padding: 6px 0;
    font-size: {FS_BODY}px;
}
QPushButton#tokenResetBtn:hover {
    background: rgba(245,158,11,15);
    border-color: rgba(245,158,11,120);
}

QPushButton#tokenCloseBtn {
    background: rgba(22,24,42,200);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    padding: 6px 0;
    font-size: {FS_BODY}px;
}
QPushButton#tokenCloseBtn:hover {
    background: rgba(40,42,68,220);
}

QFrame#tokenSummaryCard {
    background: rgba(16,18,32,200);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 10px;
}
QFrame#tokenTableCard {
    background: rgba(16,18,32,200);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 10px;
}

/* Token summary metric labels */
QLabel#tokenMetricLabel {
    color: #94a3b8;
    font-size: {FS_SM}px;
}
QLabel#tokenMetricValue {
    font-size: {FS_MD}px;
    font-weight: bold;
}

/* Token table */
QLabel#tokenTableTitle {
    color: #e2e8f0;
    font-size: {FS_MD}px;
    font-weight: bold;
}
QLabel#tokenTableEmpty {
    color: #64748b;
    font-size: {FS_SM}px;
    padding: 12px;
}
QWidget#tokenHeaderRow {
    background: rgba(22,24,42,180);
    border-bottom: 1px solid rgba(255,255,255,8);
}
QWidget#tokenDataRow {
    border-bottom: 1px solid rgba(255,255,255,4);
}
QLabel#tokenHeaderCell {
    color: #94a3b8;
    font-size: {FS_XS}px;
    font-weight: bold;
}
QLabel#tokenDataCell {
    color: #e2e8f0;
    font-size: {FS_XS}px;
}


/* ============================================================
   24. RICH TEXT (MARKDOWN RENDERED)
   ============================================================ */

QLabel#richText {
    color: #e2e8f0;
    font-size: {FS_MD}px;
    line-height: 1.6;
    padding: 0;
}


/* ============================================================
   25. PARAM DIFF (glass)
   ============================================================ */

QPushButton#diffToggle {
    color: #fbbf24;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    text-align: left;
    padding: 2px 6px;
    border: none;
    background: transparent;
    border-radius: 4px;
}
QPushButton#diffToggle:hover {
    color: #ffffff;
    background: rgba(30,32,55,120);
}

QFrame#diffFrame {
    background: rgba(10,10,18,220);
    border: 1px solid rgba(255,255,255,8);
    border-radius: 8px;
}

/* Inline diff components */
QLabel#diffParamName {
    color: #94a3b8;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
}
QLabel#diffOldValue {
    color: #fca5a5;
    background: rgba(239,68,68,15);
    border: 1px solid rgba(239,68,68,40);
    border-radius: 4px;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    padding: 1px 6px;
}
QLabel#diffNewValue {
    color: #86efac;
    background: rgba(16,185,129,15);
    border: 1px solid rgba(16,185,129,40);
    border-radius: 4px;
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    padding: 1px 6px;
}
QLabel#diffArrow {
    color: #64748b;
    font-size: {FS_XS}px;
}

/* Unified diff lines */
QLabel#diffLine {
    font-size: {FS_XS}px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    padding: 0 6px;
}
QLabel#diffLine[diffType="hunk"] {
    color: #3b82f6;
    background: rgba(59,130,246,12);
}
QLabel#diffLine[diffType="del"] {
    color: #fca5a5;
    background: rgba(239,68,68,12);
}
QLabel#diffLine[diffType="add"] {
    color: #86efac;
    background: rgba(16,185,129,12);
}
QLabel#diffLine[diffType="ctx"] {
    color: #64748b;
}


/* ============================================================
   26. CONTEXT MENU (glass)
   ============================================================ */

QMenu {
    background: rgba(16,18,32,240);
    color: #e2e8f0;
    border: 1px solid rgba(255,255,255,12);
    border-radius: 8px;
    font-size: {FS_SM}px;
    padding: 4px 0px;
}
QMenu::item {
    padding: 6px 22px;
    border-radius: 4px;
    margin: 1px 4px;
}
QMenu::item:selected {
    background: rgba(59,130,246,60);
}
QMenu::separator {
    height: 1px;
    background: rgba(255,255,255,8);
    margin: 4px 8px;
}


/* ============================================================
   27. PROGRESS DIALOG
   ============================================================ */

QProgressDialog {
    background: rgba(12,14,25,245);
    color: #e2e8f0;
}
QProgressBar {
    background: rgba(16,18,32,200);
    border: 1px solid rgba(255,255,255,10);
    border-radius: 6px;
    text-align: center;
    color: #e2e8f0;
    font-size: {FS_SM}px;
}
QProgressBar::chunk {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:0,
        stop:0 #3b82f6, stop:1 #6366f1);
    border-radius: 5px;
}


/* ============================================================
   28. FONT SETTINGS DIALOG (glass)
   ============================================================ */

QDialog#fontSettingsDlg {
    background: rgba(12,14,25,245);
    color: #e2e8f0;
}
QSlider#fontScaleSlider::groove:horizontal {
    background: rgba(255,255,255,15);
    height: 4px;
    border-radius: 2px;
}
QSlider#fontScaleSlider::handle:horizontal {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:1,
        stop:0 #3b82f6, stop:1 #6366f1);
    width: 16px;
    height: 16px;
    margin: -6px 0;
    border-radius: 8px;
}
QSlider#fontScaleSlider::handle:horizontal:hover {
    background: qlineargradient(x1:0,y1:0,x2:1,y2:1,
        stop:0 #60a5fa, stop:1 #818cf8);
}
QLabel#fontScaleLabel {
    color: #e2e8f0;
    font-size: {FS_MD}px;
    font-weight: bold;
}

/* ============================================================
   END
   ============================================================ */
